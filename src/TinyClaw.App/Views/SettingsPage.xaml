<Page x:Class="TinyClaw.App.Views.SettingsPage"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
               Title="Settings">
    <ScrollViewer>
        <StackPanel Margin="24" MaxWidth="600" HorizontalAlignment="Left">
            <TextBlock Text="Settings" Style="{StaticResource TitleTextBlockStyle}" Margin="0,0,0,24" />

            <!-- Channel Tokens -->
            <TextBlock Text="Channel Tokens" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8" />
            <ui:CardControl Margin="0,0,0,16" Padding="16">
                <StackPanel>
                    <TextBlock Text="Discord Bot Token" Margin="0,0,0,4" />
                    <PasswordBox x:Name="DiscordPasswordBox" Width="400" HorizontalAlignment="Left" Margin="0,0,0,12"
                                 PasswordChanged="OnDiscordPasswordChanged" />
                    <TextBlock Text="Telegram Bot Token" Margin="0,0,0,4" />
                    <PasswordBox x:Name="TelegramPasswordBox" Width="400" HorizontalAlignment="Left" Margin="0,0,0,12"
                                 PasswordChanged="OnTelegramPasswordChanged" />
                    <TextBlock Text="Telegram Proxy URL (optional)" Margin="0,0,0,4" />
                    <ui:TextBox Text="{Binding TelegramProxyUrl, UpdateSourceTrigger=PropertyChanged}" Width="400" HorizontalAlignment="Left"
                                PlaceholderText="http://proxy.company.com:8080" />
                </StackPanel>
            </ui:CardControl>

            <!-- Workspace -->
            <TextBlock Text="Workspace" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8" />
            <ui:CardControl Margin="0,0,0,16" Padding="16">
                <StackPanel>
                    <TextBlock Text="Workspace Path" Margin="0,0,0,4" />
                    <StackPanel Orientation="Horizontal">
                        <ui:TextBox Text="{Binding WorkspacePath, UpdateSourceTrigger=PropertyChanged}" Width="340" />
                        <ui:Button Content="Browse" Margin="8,0,0,0" Click="OnBrowseClick" />
                    </StackPanel>
                </StackPanel>
            </ui:CardControl>

            <!-- Monitoring -->
            <TextBlock Text="Monitoring" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8" />
            <ui:CardControl Margin="0,0,0,16" Padding="16">
                <StackPanel>
                    <TextBlock Text="Heartbeat Interval (seconds)" Margin="0,0,0,4" />
                    <ui:TextBox Text="{Binding HeartbeatInterval, UpdateSourceTrigger=PropertyChanged}" Width="120" HorizontalAlignment="Left" />
                </StackPanel>
            </ui:CardControl>

            <!-- Model Provider -->
            <TextBlock Text="Default Provider" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8" />
            <ui:CardControl Margin="0,0,0,16" Padding="16">
                <StackPanel>
                    <RadioButton Content="Anthropic (Claude)" IsChecked="{Binding IsAnthropic}" Margin="0,0,0,8" GroupName="Provider" />
                    <RadioButton Content="OpenAI (Codex)" IsChecked="{Binding IsOpenAi}" GroupName="Provider" />
                    <TextBlock Text="Default Model" Margin="0,12,0,4" />
                    <ui:TextBox Text="{Binding DefaultModel, UpdateSourceTrigger=PropertyChanged}" Width="200" HorizontalAlignment="Left" />
                </StackPanel>
            </ui:CardControl>

            <!-- Theme -->
            <TextBlock Text="Appearance" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8" />
            <ui:CardControl Margin="0,0,0,16" Padding="16">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Dark Theme" VerticalAlignment="Center" Margin="0,0,12,0" />
                    <ToggleButton x:Name="ThemeToggle" IsChecked="{Binding IsDarkTheme}" Click="OnThemeToggle" />
                </StackPanel>
            </ui:CardControl>

            <!-- Save -->
            <ui:Button Content="Save Settings" Appearance="Primary" Icon="{ui:SymbolIcon Save24}"
                       Click="OnSaveClick" HorizontalAlignment="Left" Margin="0,8,0,24" />
        </StackPanel>
    </ScrollViewer>
</Page>
